CREATE DATABASE job_portal;
USE job_portal;

CREATE TABLE users (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    is_active BIT(1) NOT NULL,
    password VARCHAR(255) NOT NULL,
    registration_date DATETIME(6) NOT NULL,
    user_type_id INT NOT NULL,
    FOREIGN KEY (user_type_id) REFERENCES users_type(user_type_id)
);

CREATE TABLE users_type (
    user_type_id INT PRIMARY KEY AUTO_INCREMENT,
    user_type_name VARCHAR(255) NOT NULL
);

CREATE TABLE recruiter_profile (
    user_account_id INT PRIMARY KEY,
    city VARCHAR(255),
    company VARCHAR(255),
    country VARCHAR(255),
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    profile_photo VARCHAR(64),
    state VARCHAR(255),
    FOREIGN KEY (user_account_id) REFERENCES users(user_id)
);

CREATE TABLE job_seeker_profile (
    user_account_id INT PRIMARY KEY,
    city VARCHAR(255),
    country VARCHAR(255),
    employment_type VARCHAR(255),
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    profile_photo VARCHAR(255),
    resume VARCHAR(255),
    state VARCHAR(255),
    work_authorization VARCHAR(255),
    FOREIGN KEY (user_account_id) REFERENCES users(user_id)
);

CREATE TABLE job_post_activity (
    job_post_id INT PRIMARY KEY AUTO_INCREMENT,
    description_of_job VARCHAR(1000),
    job_title VARCHAR(255),
    job_type VARCHAR(255),
    posted_date DATETIME(6),
    remote VARCHAR(255),
    salary VARCHAR(255),
    job_company_id INT,
    job_location_id INT,
    posted_by_id INT,
    FOREIGN KEY (job_company_id) REFERENCES job_company(id),
    FOREIGN KEY (job_location_id) REFERENCES job_location(id),
    FOREIGN KEY (posted_by_id) REFERENCES recruiter_profile(user_account_id)
);

CREATE TABLE job_company (
    id INT PRIMARY KEY AUTO_INCREMENT,
    logo VARCHAR(255),
    name VARCHAR(255)
);

CREATE TABLE job_location (
    id INT PRIMARY KEY AUTO_INCREMENT,
    city VARCHAR(255),
    country VARCHAR(255),
    state VARCHAR(255)
);

CREATE TABLE job_seeker_apply (
    id INT PRIMARY KEY AUTO_INCREMENT,
    apply_date DATETIME(6),
    cover_letter VARCHAR(255),
    job INT,
    user_id INT,
    FOREIGN KEY (job) REFERENCES job_post_activity(job_post_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE TABLE job_seeker_save (
    id INT PRIMARY KEY AUTO_INCREMENT,
    job INT,
    user_id INT,
    FOREIGN KEY (job) REFERENCES job_post_activity(job_post_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE TABLE skills (
    id INT PRIMARY KEY AUTO_INCREMENT,
    experience_level VARCHAR(255),
    name VARCHAR(255),
    years_of_experience VARCHAR(255),
    job_seeker_profile INT,
    FOREIGN KEY (job_seeker_profile) REFERENCES job_seeker_profile(user_account_id)
);

